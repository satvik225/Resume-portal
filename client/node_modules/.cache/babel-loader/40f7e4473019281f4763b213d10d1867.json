{"ast":null,"code":"var _jsxFileName = \"/Users/satvik/Downloads/IIITL-Resume_Portal/client/src/pages/Home.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect } from 'react';\nimport { useDatasContext } from \"../hooks/useDatasContext\";\nimport { useAuthContext } from \"../hooks/useAuthContext\";\nimport DataDetails from '../components/DataDetails';\nimport DataForm from '../components/DataForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Home = () => {\n  _s();\n\n  const {\n    datas,\n    dispatch\n  } = useDatasContext();\n  const {\n    user\n  } = useAuthContext();\n  useEffect(() => {\n    if (user.role !== 'admin') {\n      const fetchDatas = async () => {\n        const response = await fetch('/api/data', {\n          headers: {\n            'Authorization': `Bearer ${user.token}`\n          }\n        });\n        const json = await response.json();\n\n        if (response.ok) {\n          dispatch({\n            type: 'SET_DATAS',\n            payload: json\n          });\n        }\n      };\n\n      if (user) {\n        fetchDatas();\n      }\n\n      console.log('user:', user.role);\n    } else {\n      const fetchDatas = async () => {\n        const response = await fetch('/api/data/admin', {\n          headers: {\n            'Authorization': `Bearer ${user.token}`\n          }\n        });\n        const json = await response.json();\n        console.log(json);\n\n        if (response.ok) {\n          dispatch({\n            type: 'SET_DATAS',\n            payload: json\n          });\n        }\n      };\n\n      if (user) {\n        fetchDatas();\n      }\n    }\n  }, [dispatch, user]);\n\n  if (user.role !== 'admin') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"home\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"datas\",\n        children: datas && datas.map(data => /*#__PURE__*/_jsxDEV(DataDetails, {\n          data: data\n        }, data._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(DataForm, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"home\",\n      children: [/*#__PURE__*/_jsxDEV(\"center\", {\n        children: /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"a\",\n          children: \"Admin Page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"home\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"datas\",\n          children: datas && datas.map(data => /*#__PURE__*/_jsxDEV(DataDetails, {\n            data: data\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 11\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this);\n  }\n};\n\n_s(Home, \"w65ppinYOJuVGRw3MhWQLoyld0U=\", false, function () {\n  return [useDatasContext, useAuthContext];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["useEffect","useDatasContext","useAuthContext","DataDetails","DataForm","Home","datas","dispatch","user","role","fetchDatas","response","fetch","headers","token","json","ok","type","payload","console","log","map","data","_id"],"sources":["/Users/satvik/Downloads/IIITL-Resume_Portal/client/src/pages/Home.js"],"sourcesContent":["import { useEffect }from 'react'\nimport { useDatasContext } from \"../hooks/useDatasContext\"\nimport { useAuthContext } from \"../hooks/useAuthContext\"\nimport DataDetails from '../components/DataDetails'\nimport DataForm from '../components/DataForm'\n\n\n\nconst Home = () => {\n  const {datas, dispatch} = useDatasContext()\n  const {user} = useAuthContext()\n\n\n  useEffect(() => {\n    if(user.role !== 'admin'){\n    const fetchDatas = async () => {\n      const response = await fetch('/api/data', {\n        headers: {'Authorization': `Bearer ${user.token}`},\n      })\n      const json = await response.json()\n\n      if (response.ok) {\n        dispatch({type: 'SET_DATAS', payload: json})\n      }\n    }\n    if (user) {\n      fetchDatas()\n    }\n    console.log('user:', user.role)\n  }\n  else{\n    const fetchDatas = async () => {\n      const response = await fetch('/api/data/admin', {\n        headers: {'Authorization': `Bearer ${user.token}`},\n      })\n      const json = await response.json()\n      console.log(json)\n\n      if (response.ok) {\n        dispatch({type: 'SET_DATAS', payload: json})\n      }\n    }\n    if (user) {\n      fetchDatas()\n    }\n  }\n  }, [dispatch, user])\n\n\n\n\n  if(user.role !== 'admin'){\n  return (\n    <div className=\"home\">\n      <div className=\"datas\">\n        {datas && datas.map((data) => (\n          <DataDetails key={data._id} data={data} />\n        ))}\n      </div>\n      <DataForm />\n    </div>\n  )\n        }\n  else{\n    return (\n      <div className=\"home\">\n        <center><h4 className='a'>Admin Page</h4></center>\n        <div className=\"home\">\n      <div className=\"datas\">\n        {datas && datas.map((data) => (\n          <DataDetails  data={data} />\n        ))}\n      </div>\n    </div>\n      </div>\n    )\n  }\n}\n\nexport default Home"],"mappings":"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"},"metadata":{},"sourceType":"module"}